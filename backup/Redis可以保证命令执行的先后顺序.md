而如果借助Redis的lua脚本或者事务进行库存扣减，
那么Redis可以保证命令执行的先后顺序，
按照发送顺序进行执行，
先来的请求就能先进行库存扣减了。
扣减成功则说明有库存，那么就可以给他发放优惠券了。（操作数据库）